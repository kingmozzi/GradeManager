<Window x:Class="GradeManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GradeManager"
        mc:Ignorable="d"
        xmlns:vm="clr-namespace:GradeManager.ViewModels"
        Title="성적 관리" Height="720" Width="1180">
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <DockPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="8" VerticalAlignment="Center">
            <TextBlock Text="학년" VerticalAlignment="Center" Margin="0,0,4,0"/>
            <ComboBox Width="80" ItemsSource="{Binding Grades}" SelectedItem="{Binding SelectedGrade}" Margin="0,0,8,0"/>
            <Button Content="학년 추가" Command="{Binding AddGradeCmd}" Margin="0,0,4,0"/>
            <Button Content="학년 삭제" Command="{Binding RemoveGradeCmd}" Margin="0,0,8,0"/>

            <TextBlock Text="반" VerticalAlignment="Center" Margin="0,0,4,0"/>
            <ComboBox Width="80" ItemsSource="{Binding Classes}" SelectedItem="{Binding SelectedClass}" Margin="0,0,8,0"/>
            <Button Content="반 추가" Command="{Binding AddClassCmd}" Margin="0,0,4,0"/>
            <Button Content="반 삭제" Command="{Binding RemoveClassCmd}" Margin="0,0,8,0"/>

            <TextBox Width="180" Margin="16,0,0,0" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"/>

            <Separator Width="16"/>
            <Button Content="학생 추가" Command="{Binding AddStudentCmd}" Margin="4,0,0,0"/>
            <Button Content="학생 삭제" Command="{Binding RemoveStudentCmd}" Margin="4,0,0,0"/>

            <Separator Width="16"/>
            <ComboBox Width="140" ItemsSource="{Binding Subjects}" SelectedItem="{Binding SelectedSubject}" Margin="4,0,0,0"/>
            <Button Content="과목 추가" Command="{Binding AddSubjectCmd}" Margin="4,0,0,0"/>
            <Button Content="과목 삭제" Command="{Binding RemoveSubjectCmd}" Margin="4,0,0,0"/>
            <StackPanel Orientation="Horizontal" Margin="4,0,0,0">
                <TextBox Width="120" Text="{Binding PendingSubjectName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,4,0"/>
                <Button Content="이름 변경" Command="{Binding RenameSubjectCmd}"/>
            </StackPanel>

            <Separator Width="16"/>
            <Button Content="저장" Command="{Binding SaveCmd}" Margin="4,0,0,0"/>
        </StackPanel>

        <!-- 점수표 -->
        <DataGrid ItemsSource="{Binding PivotView}" x:Name="Grid"
                  SelectionMode="Single" SelectionUnit="FullRow"
                  AutoGenerateColumns="True" CanUserAddRows="False" IsReadOnly="False"
                  AutoGeneratingColumn="OnAutoGeneratingColumn"
                  BeginningEdit="OnBeginningEdit"
                  CellEditEnding="OnCellEditEnding"
                  SelectedItem="{Binding SelectedRow, Mode=TwoWay}"/>
    </DockPanel>
</Window>
